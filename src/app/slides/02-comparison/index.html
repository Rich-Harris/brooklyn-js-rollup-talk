<link rel='ractive' href='./BundleChart.html'>

<Slide
	class='padded'
	bg='#001f3f'
	steps='4'
>
	<div class='background'>
		{{#if step === 1}}
			<pre intro-outro='fade'>{{code.browserify}}</pre>
		{{/if}}

		{{#if step === 2}}
			<pre intro-outro='fade'>{{code.webpack}}</pre>
		{{/if}}

		{{#if step === 3}}
			<pre intro-outro='fade'>{{code.esperanto}}</pre>
		{{/if}}
	</div>

	<!-- browserify -->
	{{#if step >= 1}}
		<BundleChart
			bundle='{{bundles.browserify}}'
			maxSize='{{maxSize}}'
			logo='images/logos/browserify.png'
			label='browserify'
			active='{{step===1}}'
			minified='{{step===4}}'
		/>
	{{/if}}

	<!-- webpack -->
	{{#if step >= 2}}
		<BundleChart
			bundle='{{bundles.webpack}}'
			maxSize='{{maxSize}}'
			logo='images/logos/webpack.png'
			label='webpack'
			active='{{step===2}}'
			minified='{{step===4}}'
		/>
	{{/if}}

	<!-- esperanto -->
	{{#if step >= 3}}
		<BundleChart
			bundle='{{bundles.esperanto}}'
			maxSize='{{maxSize}}'
			logo='images/logos/esperanto.png'
			label='esperanto'
			active='{{step >= 3 && step <= 4}}'
			minified='{{step===4}}'
		/>
	{{/if}}


</Slide>

<style>
	.background {
		position: absolute;
		width: 100%;
		height: 100%;
		left: 0;
		bottom: 0;
	}

	pre {
		position: absolute;
		top: 50%;
		left: 2em;
		transform: translate(0,-50%);
		color: rgba(255,255,255,0.2);
		font-size: 2vw;
	}
</style>

<script>
	const generateBundle = require( './generateBundle' );

	const bundles = {
		browserify: generateBundle({ cruft: 3, minifyFactor: 3 }),
		webpack: generateBundle({ cruft: 1, minifyFactor: 3 }),
		esperanto: generateBundle({ cruft: 0, minifyFactor: 4 })
	};

	console.log( 'bundles', bundles )

	component.exports = {
		data: () => ({
			bundles,
			maxSize: Math.max(
				bundles.browserify.size,
				bundles.webpack.size,
				bundles.esperanto.size
			),
			code: {
				browserify: require( './code-samples/browserify' ),
				webpack: require( './code-samples/webpack' ),
				esperanto: require( './code-samples/esperanto' )
			}
		}),

		transitions: {
			fade: require( 'ractive-transitions-fade' )
		}
	}
</script>
